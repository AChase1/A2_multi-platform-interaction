<!DOCTYPE html>
<html>
  <head>
    <title>Atomic Architect VR</title>
    <!-- IMPORTS -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="js/electron.js"></script>
    <script src="js/atom.js"></script>
    <script src="js/atom_vortex.js"></script>
    <script src="js/element_info.js"></script>
    <script>
      AFRAME.registerComponent("start_experience", {
        init: function () {
          // when called, can assume A-Frame scene is ready
          console.log("scene loaded");
          document.querySelector("#user-gesture-button").style.display =
            "block";
        },
      });

      // called when user clicks initial button
      const startExperience = function () {
        // hide button
        document.querySelector("#user-gesture-overlay").style.display = "none";
      };
    </script>
  </head>
  <body>
    <a-scene start_experience>
      <!--ASSETS-->
      <a-assets>
        <audio
          id="button_click"
          src="assets/sounds/button_click.mp3"
          preload="auto"
          crossorigin="anonymous"
        ></audio>
      </a-assets>

      <!-- ELEMENT INFO PANEL -->

      <!-- ATOM VORTEX -->
      <a-entity id="unstable-nucleus" class="interactive" atom-vortex
        ><a-entity id="atom" class="interactive" atom></a-entity
        ><a-entity
          id="element-panel"
          class="'interactive"
          element-info
        ></a-entity
      ></a-entity>

      <!-- ATOM -->

      <!-- CAMERA & CURSOR -->
      <a-entity
        id="pov_cam"
        position="0 1.8 0"
        camera
        wasd-controls
        look-controls
      >
        <a-entity
          id="cursor"
          cursor="rayOrigin:mouse;"
          raycaster="far:20; interval:200; objects:.interactive;"
        >
        </a-entity>
      </a-entity>

      <!-- ENVIRONMENT -->
      <a-entity
        id="environment"
        geometry="primitive:sphere; radius:20;"
        material="color:#000000; side:back; shader:flat;"
        position="0 0 -3"
      >
      </a-entity>

      <!-- USER GESTURE HTML-->
      <div id="user-gesture-overlay">
        <div class="center">
          <button id="user-gesture-button" onClick="startExperience();">
            Enter Experience
          </button>
        </div>
      </div>
    </a-scene>
  </body>
</html>
